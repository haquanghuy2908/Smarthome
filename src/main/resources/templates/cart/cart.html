<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/layout/index :: dynamic(~{::main})}">

<head>
    <title>Digizone</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>
    <main>
        <div class="container" th:fragment="shopping_cart">
            <div class="cart-page">
                <table>
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Số lượng</th>
                        <th>Thành tiền</th>
                    </tr>

                    <tr ng-repeat="item in cart.items">
                        <td>
                            <div class="cart-info">
                                <img ng-src="{{'/assets/images/' + item.hinhAnh}}" 
                                    alt="" width="100%" height="100%">
                                <div>
                                    <p class="product-name">{{item.tenSP}}</p>
                                    <small class="product-price">$ {{item.gia | number : 0}}</small>
                                    <a class="badge badge-pill badge-danger ml-3" href="" ng-click="cart.remove(item.id)">Xóa</a>
                                </div>
                            </div>
                        </td>
                        <td>
                            <form action="">
                                <div class="form-group">
                                    <input type="number" ng-change="cart.saveToLocalStorage()" 
			                		ng-model="item.soLuong" min="1">
                                </div>
                            </form>
                        </td>
                        <td>${{item.soLuong * item.gia | number : 0}}</td>
                    </tr>
                </table>

                <div class="total-price">
                    <table>
                        <tr>
                            <td>Thành tiền</td>
                            <td>Thuế VAT</td>
                            <td>Tổng tiền</td>
                        </tr>
                        <tr ng-repeat="item in cart.items">
                            <td>${{item.soLuong * item.gia | number : 0}}</td>
                            <td ng-model="item.VAT">${{(item.soLuong * item.gia) * 0.05 | number : 0}}</td>
                            <td >${{(item.soLuong * item.gia) + ((item.soLuong * item.gia) * 0.05) | number : 0}}</td>
                        </tr>
                    </table>
                </div>

                <div class="cart-pay">
                	<span style="display: none;" id="tenND" th:text="${#request.remoteUser}"></span>
                    <button class="" ng-click="order.purcharse()">Thanh toán</button>
                </div>
            </div>
        </div>
    </main>
</body>

</html>